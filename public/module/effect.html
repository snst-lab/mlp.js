
<template id='textEffect'>
    <div style='background:url("img/black-cube-min.jpg");background-size: cover;width:100%;height:15rem;text-align:center;'>
        <div use='textEffectString'>#CONTENT</div>
        <div use='typeStrings'>SUBTITLE</div>
      </div>
</template>
<flex-module id='textEffectString'>
    @css=
        font-size:3.5em;
        box-sizing:border-box;
        align-items: center;
        justify-content: center;
        display:none;
    @onload=
        const self = mlp.dom(THIS);
        const chars = self.textContent.split('');
        self.textContent = '';
        const colors = ['yellow','turquoise','deeppink','green','blue','orange'];
        setTimeout(function(){
            self.style.display = 'flex';
            chars.forEach(function(char,i){
                const div = document.createElement('div');
                div.textContent = char;
                div.classList.add('char');
                self.appendChild(div);
                div.style = 'color:'+ colors[i] +';animation:textEffect 3s linear normal forwards;animation-delay:0.'+i+'s;';
            });
        },1000);
    @keyframes textEffect =
      0% {
        text-shadow: 0 0 40px #fff;
        margin:1rem 5rem 0 5rem;
        opacity: 0;
        transform: rotateY(-270deg);
      }
      25% {
        text-shadow: 0 0 40px #fff;
        margin:1rem 3rem 0 3rem;
        opacity: 0.3;
        transform: rotateY(0deg);
      }
      40% {
        text-shadow: 0 0 10px #fff;
        margin:8rem 2rem 0 2rem;
        opacity: 0.7;
        transform: rotateY(270deg) translateZ(100px);
      }
      50% {
        text-shadow: 0 0 5px #fff;
        margin:6rem 1rem 0 1rem;
        letter-spacing: 1em;
        opacity: 0.8;
        transform: rotateY(0deg) translateZ(100px);
      }
      55% {
        text-shadow: 0 0 5px #fff;
        margin:4rem 1rem 0 1rem;
        opacity: 0.8;
        transform: rotateY(90deg) translateZ(100px);
      }
      80% {
        text-shadow: 0 0 15px #fff;
        margin:4rem 0.4rem 0 0.4rem;
        opacity: 1;
        transform: rotateY(0deg) translateZ(130px);
        pointer-events: none;
      }
      90%{
        text-shadow: 0 0 15px #fff;
        margin:4rem 0.4rem 0 0.4rem;
        opacity: 1;
        transform: rotateY(0deg) translateZ(130px);
        pointer-events: none;
      }
      95%{
        text-shadow: 0 0 15px #fff;
        margin:3.7rem 0.4rem 0 0.4rem;
        opacity: 1;
        transform: rotateY(0deg) translateZ(130px);
        pointer-events: none;
      }
      100% {
        text-shadow: 0 0 25px #fff;
        margin:4rem 0.4rem 0 0.4rem;
        opacity: 1;
        transform: rotateY(0deg) translateZ(130px);
        pointer-events: none;
      }
</flex-module>
<flex-module id='typeStrings'>
    @css=
      margin-top:1rem;
      color:rgb(150,150,150);
    @onload=
        const self = mlp.dom(THIS);
        if(DESKTOP){
          const chars = self.textContent.split('');
          self.textContent = '';
          var i = 0;
          setTimeout(function(){
              const interval = setInterval(function(){
                self.textContent += chars[i];
                i++;
                if(i===chars.length){
                    clearInterval(interval);
                }
              },100);
          },4000);
        }else{
          self.style.display = 'none';
          setTimeout(function(){
            self.fadeIn(200);
          },4000);
        }
</flex-module>